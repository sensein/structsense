flow:
  - id: extracted_structured_information
    agent_key: extractor_agent
    task_key: bbqs_resource_extraction
    inputs:
      resource: "{{source_text}}"  # still comes from runtime. Do not change this variable name

  - id: align_structured_information
    agent_key: alignment_agent
    task_key: bbqs_resource_alignment
    inputs:
      extracted_info: "{{extracted_info}}"  #  comes from agent's output_variable
    knowledge_source: extracted_info        #  match output_variable from previous step i.e., extractor_agent and is used to get content from the vector db

  - id: judge_alignment
    agent_key: judge_agent
    task_key: bbqs_resource_judgment
    inputs:
      aligned_structured_terms: "{{aligned_structured_terms}}"
    knowledge_source: aligned_structured_terms
